"use strict";(self["webpackChunklivego"]=self["webpackChunklivego"]||[]).push([[289],{4730:function(t,e,i){i(3699),i(1122);var o=i(9248),s=i(5494),n=i(3069),h=i(9755),r=i.n(h);e["Z"]={DEBUG:!1,id:"",uid:"",streamRoomId:"",liveIngTimeKey:"",liveIngTime:"",vue:null,chatProcess:!1,init(t,e,i){this.DEBUG=i,this.id=t.id,this.uid=t.uid,this.streamRoomId=this.id+"_"+this.uid,this.liveIngTimeKey=this.streamRoomId+"_liveStramHostTime",this.vue=e},getLiveInfo(t){const e={id:this.id};o.Z.post(s.fQ,e,(e=>{let i=new Date;e.info.start_time&&(i=new Date(e.info.start_time)),this.liveIngTime=parseInt(i.getTime()),t(e)}))},getStartTime(){let t=parseInt(this.liveIngTime),e=new Date,i=(e.getTime()-t)/1e3;return i=Math.floor(i),i<0&&(i=0),i},updateLiveTime(){},liveTimeRemove(){},joinSocketLiveStream(){let t={uid:this.uid,roomId:this.streamRoomId,roomHost:"yes"};n.Z.init(t,this.vue,this.DEBUG);const e={id:this.id.toString()};o.Z.post(s.ED,e,(t=>{}))},setTimeVal(t){if(t=parseInt(t),isNaN(t))return"00:00:00";if(t<0)return"00:00:00";let e=t%60;e=Math.floor(e);let i,o=t/60;o=Math.floor(o),i=o>=60?o%60:o,i=Math.floor(i);let s,n=o/60;n=Math.floor(n);let h="";return s=n>=24?n%24:n,s=Math.floor(s),h+this.zf(s)+":"+this.zf(i)+":"+this.zf(e)},zf(t){return t=parseInt(t),t<10?"0"+t:t},doEndMeetingActive(t){t?this.mobileRecodeChatAct():this.recodeChatAct(),n.Z.close("host");const e={id:this.id.toString()};o.Z.post(s.Jw,e,(t=>{}))},mobileRecodeChatAct(){const t=r()(".zmwebsdk-makeStyles-chatCustomize-10");if(t.html())this.mobileSaveChatAct();else{const t=r()("#menu-list-icon-more");if(t.html())r()("#menu-list-icon-more li:nth-child(2)").click(),setTimeout((()=>{this.mobileSaveChatAct()}),500);else{const t=r()("#meetingSDKElement div.zmwebsdk-MuiPaper-root.zmwebsdk-makeStyles-root-58.zmwebsdk-MuiPaper-elevation1.zmwebsdk-MuiPaper-rounded > div:nth-child(5) > button");r()(t).click(),setTimeout((()=>{r()("#menu-list-icon-more li:nth-child(2)").click(),setTimeout((()=>{this.mobileSaveChatAct()}),500)}),500)}}},mobileSaveChatAct(){if(this.chatProcess)return;this.chatProcess=!0;let t,e,i,o=r()(".ReactVirtualized__Grid__innerScrollContainer > li"),s=[];o.each((function(){t=r()(this).find("button:eq(0)").text(),e=r()(this).find("button:eq(1)").text(),i=r()(this).find(".zmwebsdk-MuiListItemText-root span").text(),t&&e?s.push({to:e,from:t,time:"",msg:i}):s.push({to:"",from:"",time:"",msg:i})}));let n={message:JSON.stringify(s),parentId:this.id.toString()};this.updateChat(n)},recodeChatAct(){let t=r()("#wc-content #wc-footer .footer-chat-button button");if(r()("#wc-container-right")){if(r()("#wc-container-right .chat-container").html())this.saveChatAct();else if(t){t.click();let e=this;setTimeout((function(){e.saveChatAct()}),500)}}else if(t){t.click();let e=this;setTimeout((function(){e.saveChatAct()}),500)}},saveChatAct(){if(this.chatProcess)return;this.chatProcess=!0;let t,e,i,o,s=r()("#wc-container-right .chat-container .ReactVirtualized__Grid__innerScrollContainer > div"),n=[];s.each((function(){t=r()(this).find(".chat-item__chat-info-header").find("span:eq(0)").text(),e=r()(this).find(".chat-item__chat-info-header").find("span:eq(2)").text(),i=r()(this).find(".chat-item__chat-info-header").find("span:eq(4)").text(),o=r()(this).find(".chat-message__text-content").text(),t&&e&&i?n.push({to:e,from:t,time:i,msg:o}):n.push({to:"",from:"",time:"",msg:o})}));let h={message:JSON.stringify(n),parentId:this.id.toString()};this.updateChat(h)},updateChat(t){o.Z.post(s.dl,t,(t=>{this.chatProcess=!1}))}}},268:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.meetingInfoShow?i("zoomMeetingMobileSdk",{staticClass:"zoomVideoComponent",attrs:{meetingInfo:t.meetingInfo,forceOutActive:t.forceOutActive,hostEndActive:t.hostEndActive,userInfo:t.userInfo,role:"1"},on:{zoomAction:t.zoomAction}}):t._e(),i("div",{attrs:{id:"zoom-live-mobile"}},[t.meetingInfoShow?i("hostVideoComponent",{attrs:{meetingInfo:t.meetingInfo,meetingStart:t.meetingStart},on:{outActive:t.outActive}}):t._e()],1),t.DEBUG&&t.testDebugUrl?i("iframe",{staticStyle:{display:"none"},attrs:{src:t.testDebugUrl,id:"testIframe"}}):t._e()],1)},s=[],n=i(6753),h=i(3699),r=i(4730),a=i(6719),c=i(6873),m={name:"hostVideoMobile",components:{zoomMeetingMobileSdk:c.Z,hostVideoComponent:n.Z},data(){return{DEBUG:!1,id:"",testDebugUrl:"",forceOutActive:!1,hostEndActive:!1,userInfo:{},meetingInfo:{},meetingStart:!1,meetingInfoShow:!1}},created(){if(this.id=this.$route.params.id,!this.$isMobile())return void location.replace("/liveStream/hostVideoPc/"+this.id);h.Z.setDevice(this.$isMobile());const t=h.Z.getSession();if(t&&t?.memberInfo){if(this.id<1)return void this.doError();this.memberInfo=t.memberInfo,this.uid=this.memberInfo.uid,this.userInfo={uid:this.uid,userName:this.memberInfo.name,userEmail:this.memberInfo.email},this.streamRoomId=this.id+"_"+this.uid,this.getMeetingInfo()}else console.log("error")},methods:{getMeetingInfo(){const t={id:this.id.toString(),uid:this.uid};r.Z.init(t,this,this.DEBUG),a.Z.init(t,this),r.Z.getLiveInfo((t=>{this.meetingInfo=t,this.meetingInfoShow=!0,this.DEBUG&&(this.testDebugUrl="http://localhost/testJsonRpc/"+this.id+"/"+this.uid)}))},zoomAction(t){switch(t.type){case"start":this.meetingStart=!0,this.DEBUG?this.testDebugUrl="http://localhost/testJsonRpc/"+this.id+"/"+this.uid:r.Z.joinSocketLiveStream();break}},outActive(){this.forceOutActive=!0}}},d=m,l=i(1001),u=(0,l.Z)(d,o,s,!1,null,null,null),f=u.exports}}]);
//# sourceMappingURL=289.76489a77.js.map