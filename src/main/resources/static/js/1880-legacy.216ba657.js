"use strict";(self["webpackChunklivego"]=self["webpackChunklivego"]||[]).push([[1880],{23069:function(e,t,s){s(68309),s(21249);var o=s(18372),n=s.n(o),i=s(99848);t["Z"]={DEBUG:!1,jsonRpcUrl:i.Y,connected:!1,jsonRpcClientWs:null,sessionId:null,roomId:"",initMethod:"",userId:null,vue:null,accessType:"no",userName:"",userEmail:"",init:function(e,t,s){this.DEBUG=s,e.uid&&e.roomId&&(this.connected||("yes"==e.roomHost?this.initMethod="makeLiveRoom":(this.initMethod="joinRoom",e.accessType&&(this.accessType=e.accessType),e.name&&(this.userName=e.name),e.email&&(this.userEmail=e.email)),this.roomId=e.roomId,this.vue=t,this.userId=e.uid,this.setConnect()))},setConnect:function(){var e=this;var t="wss";this.DEBUG&&(t="ws");var s=t+"://"+this.jsonRpcUrl+"/jsonRpc",o={hearbeat:5e3,sendCloseMessage:!1,ws:{uri:s,useSockJS:!1,onconnected:function(){e.connected=!0,e.socketInit()},ondisconnect:this.disconnectCallback(this),onreconnected:this.connectReCallback(this)},rpc:{requestTimeout:5e3,sendResponse:function(t){e.callMessage(t)}}};this.jsonRpcClientWs=new(n().clients.JsonRpcClient)(o)},connectReCallback:function(e){e.connected=!0},disconnectCallback:function(e){e.connected=!1},close:function(e){var t={};t.responseMethod="liveClose",this.connected&&this.userId&&this.roomId&&(t.uid=this.userId,t.sessionId=this.sessionId,t.userType=e,t.roomId=this.roomId,this.jsonRpcClientWs.send("liveClose",t,(function(e,t){e?console.log(e):(console.log("--succ--"),console.log(t))})))},callMessage:function(e){switch(e.responseMethod){case"forceHostOut":this.vue.$eventBus.$emit("modalOpen",{message:"다른곳에서 강제 방송정지 시켰습니다",doAction:function(){window.close()}});break;default:this.vue.$eventBus.$emit("rpcJsonTransfer",e);break}},socketInit:function(){var e=this,t={interval:5e3,operation:"connect",uid:this.userId,accessType:this.accessType,roomId:this.roomId,name:this.userName,email:this.userEmail,responseMethod:this.initMethod};this.jsonRpcClientWs.send(this.initMethod,t,(function(t,s){if(t)console.log(t);else switch(console.log(s,"succ"),e.sessionId=s.sessionId,s.map.result){case"double":"makeLiveRoom"==e.initMethod?e.vue.$eventBus.$emit("modalOpen",{message:"다른곳에서 이미 방송중입니다",doAction:function(){window.close()}}):e.vue.$eventBus.$emit("modalOpen",{message:"동일 컴퓨터에서 이미 동일한 방에 접근 중입니다",doAction:function(){window.close()}});break;case"fail":e.vue.$eventBus.$emit("modalOpen",{message:"잘못된 접근입니다",doAction:function(){window.close()}});break;case"success":if("makeLiveRoom"==e.initMethod&&s.map.waitUsers){var o={responseMethod:"makeLiveRoomWaitUsers",waitUsers:s.map.waitUsers};e.vue.$eventBus.$emit("rpcJsonTransfer",o)}break}}))},send:function(e,t){this.sessionId&&(e.uid=this.userId,e.sessionId=this.sessionId,e.roomId=this.roomId,console.log(e,"--------iframe send -----------------"),this.jsonRpcClientWs.send(e.sendMethod,e,(function(e,s){e?console.log(e):(console.log(s),t(s))})))},forceHostOut:function(){if(this.sessionId){var e={uid:this.userId,roomId:this.roomId,sessionId:this.sessionId,responseMethod:"forceHostOut"};this.jsonRpcClientWs.send("forceHostOut",e,(function(e,t){e?console.log(e):console.log(t)}))}},post:function(e,t){}}},1122:function(e,t,s){s(74916),s(15306),s(41539),s(39714),s(77601);var o=s(19755),n=s.n(o);t["Z"]={errorPosiFlag:!1,nl2br:function(e){return e.value.replace(/(\n|\r\n)/g,"<br>")},nl2brContent:function(e){return e=e.toString(),e=e.replace(/(\n|\r\n)/g,"<br>"),e.replace(/(<br><br>)/g,"<br>")},stripTags:function(e){var t=document.createElement("div");t.innerHTML=e;var s=t.textContent||t.innerText||"";return s},stripTagsNotEm:function(e){var t=document.createElement("div");t.innerHTML=e.replace(/<em>/gi,"{em}").replace(/<\/em>/gi,"{/em}");var s=t.textContent||t.innerText||"",o=s.replace(/{em}/gi,"<em>").replace(/{\/em}/gi,"</em>");return o},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},numericByPrice:function(e){if(0==e)return!1;if(e){e=e.toString();var t=e.replace(/,/gi,"");return t=t.toString().replace(/-/gi,""),isNaN(t)}return!0},numeric:function(e){return isNaN(e)},parseNumber:function(e){if(e){e=e.toString();var t=e.replace(/,/gi,"");return t=t.toString().replace(/-/gi,""),parseInt(t)}return 0},price:function(e){if(e){e=e.toString();var t=e.replace(/,/gi,"");return t=t.toString().replace(/-/gi,""),!this.numeric(t)&&this.numberFormat(t)}return!1},br2nl:function(e){return e.replace(/(<br>|<br\/>|<br \/>)/g,"\r")},numberFormat:function(e){if(!e)return 0;isNaN(e)&&(e=e.toString().replace(/-/gi,""));var t=new Intl.NumberFormat(["en-US"],{});return t.format(e)},fNumberFormat:function(e){e=e.toString().replace(/-/gi,""),e=e.toString().replace(/,/gi,"");var t=new Intl.NumberFormat(["en-US"],{});return t.format(e)},getStrCut:function(e,t){return e.length>=t?e.substr(0,t)+"..":e},errorPosition:function(e,t,s){var o=this,i="base"==e?n()("body"):n()(e),r=n()(i).height(),a=n()(t).offset().top,c=a>0?r-a+200:r+a-200;"base"==e?n()("html,body").animate({scrollTop:a-50},100,(function(){o.errorPosiFlag?o.errorPosiFlag=!1:(s(),o.errorPosiFlag=!0)})):n()(i).animate({scrollTop:c},100,(function(){s()}))}}},76719:function(e,t,s){s(3699),s(1122);var o=s(23069),n=s(19755),i=s.n(n);t["Z"]={id:"",uid:"",vue:null,streamRoomId:"",init:function(e,t){this.id=e.id,this.uid=e.uid,this.streamRoomId=this.id+"_"+this.uid,this.vue=t},sendToUser:function(e,t){var s=this,n={};switch(e.page){case"exam":"sendProblem"==e.action&&(this.sendRpcData(e.no,"insertProblem",t),n.userReponseParams={parentId:this.id,no:e.no,type:"insertProblem"},n.userReponseShow=!0),n.screenShow="close",n.close="loadExamShow";break;case"immExam":"sendProblem"==e.action&&(this.sendRpcData(e.no,"insertProblem",t),n.userReponseParams={parentId:this.id,no:e.no,type:"insertProblem"},n.userReponseShow=!0),n.screenShow="close",n.close="loadImmExamShow";break;case"quiz":"sendQuiz"==e.action&&(this.sendRpcData(e.no,"insertQuiz",t),n.userReponseParams={parentId:this.id,no:e.no,type:"insertQuiz"},n.userReponseShow=!0),n.screenShow="close",n.close="loadQuizShow";break;case"poll":"sendPoll"==e.action&&(this.sendRpcData(e.no,"insertPoll",t),n.userReponseParams={parentId:this.id,no:e.no,type:"insertPoll"},n.userReponseShow=!0),n.screenShow="close",n.close="loadPollShow";break;case"vote":"sendVote"==e.action&&(this.sendRpcData(e.no,"insertVote",t),n.userReponseParams={parentId:this.id,no:e.no,type:"insertVote"},n.userReponseShow=!0),n.screenShow="close",n.close="loadPollShow";break;case"userResponse":if("forceEnd"==e.action){var r="";switch(e.gtype){case"insertProblem":r="시험을";break;case"insertPoll":r="설문조사를";break;case"insertVote":r="투표를";break;case"insertQuiz":r="간단퀴즈를";break}var a={type:"confirm",message:r+" 강제 종료하시겠습니까?",doAction:function(){s.modalResponse("forceResponseEnd"),i()("#app-response").hide(),t({cmd:"responseClose"})}};this.vue.$eventBus.$emit("modalOpen",a)}else if("barHide"==e.action){switch(e.gtype){case"insertProblem":n.responseTitle="시험 진행중";break;case"insertPoll":n.responseTitle="설문 진행중";break;case"insertVote":n.responseTitle="투표 진행중";break;case"insertQuiz":n.responseTitle="간단퀴즈 진행중";break}i()("#app-response").hide(),i()("#menu-response-box").show()}else i()("#app-response").hide(),n.userReponseShow="close";break;case"fileView":n.close="loadFileShow",n.fileNo="empty",n.screenShow="close";break;case"data":if("share"==e.action){n.fileNo=e.fdata.id,n.open="loadFileShow";var c={sendMethod:"insertFdata",data:e.fdata.id,responseMethod:"insertFdata"};o.Z.send(c,(function(e){}))}else n.screenShow="close";n.close="loadDataShow"}return n},sendRpcData:function(e,t,s){var n,r={sendMethod:t,data:e,responseMethod:t};switch(o.Z.send(r,(function(e){s({cmd:"responseOpen",data:e})})),t){case"insertProblem":n="시험을 출제하였습니다";break;case"insertPoll":n="설문조사를 시작하였습니다";break;case"insertVote":n="투료를 시작하였습니다";break;case"insertQuiz":n="간단퀴즈를 출제하였습니다";break}i()("#app-response").show();var a={type:"timeout",message:n};this.vue.$eventBus.$emit("modalOpen",a)},rpcSend:function(e){o.Z.send(e,(function(e){}))},modalResponse:function(e){switch(e){case"forceResponseEnd":var t={sendMethod:"forceResponseEnd",data:"none",responseMethod:"forceResponseEnd"};o.Z.send(t,(function(){}));break}}}},76065:function(e,t,s){s(41539),s(39714),s(3699),s(1122);var o=s(89486),n=s(25494),i=s(23069),r=s(19755),a=s.n(r);t["Z"]={id:"",uid:"",userName:"",userEmail:"",vue:null,init:function(e,t){this.id=e.id,this.uid=e.uid,this.userName=e.userName,this.userEmail=e.userEmail,this.vue=t},loadComponent:function(e){var t={};switch(e){case"poll":case"vote":t.sendData={no:this.id,uid:this.uid,name:this.userName,email:this.userEmail},a()("#app-response").show(),"poll"==e?(t.load="loadPollShow",t.sendParamsId="sendPollData"):(t.load="loadVoteShow",t.sendParamsId="sendVoteData");break;case"data":t.screenShow=!0,t.load="loadDataShow";break;case"boardWrite":t.screenShow=!0,t.updArticleNo="new",t.load="zoomBoardUpdateShow";break;case"board":t.screenShow=!0,t.load="zoomBoardListShow";break}return t},jsonRpcResponse:function(e){var t={};switch(e.responseMethod){case"insertPoll":case"insertProblem":case"insertVote":case"insertQuiz":"insertProblem"==e.responseMethod?(t.sendParamsId="sendExamData",t.load="loadExamShow",t.examNo=e.data):"insertPoll"==e.responseMethod?(t.sendParamsId="sendPollData",t.load="loadPollShow"):"insertVote"==e.responseMethod?(t.sendParamsId="sendVoteData",t.load="loadVoteShow"):"insertQuiz"==e.responseMethod&&(t.sendParamsId="sendQuizData",t.load="loadQuizShow"),a()("#app-response").show(),t.sendData={no:parseInt(e.data),uid:this.uid,name:this.userName};break}return t},sendReply:function(e){var t={sendMethod:e,uid:this.uid,data:this.uid,responseMethod:e};i.Z.send(t,(function(){}))},badSubmit:function(e){var t=this,s={parentId:this.id.toString(),uid:this.uid,name:this.userName,content:e};o.Z.post(n.wu,s,(function(e){var s={type:"timeout",message:"신고가 접수되었습니다"};t.vue.$eventBus.$emit("modalOpen",s)}))}}},70359:function(e,t,s){var o=s(62032),n=(s(41539),s(39714),s(18264),s(82472),s(48675),s(92990),s(18927),s(33105),s(35035),s(74345),s(7174),s(32846),s(44731),s(77209),s(96319),s(58867),s(37789),s(33739),s(29368),s(14483),s(12056),s(3462),s(30678),s(27462),s(33824),s(55021),s(12974),s(15016),s(3699),s(1122),s(89486)),i=s(25494),r=s(23069),a=s(19755),c=s.n(a);t["Z"]={DEBUG:!1,id:"",uid:"",userName:"",userEmail:"",streamRoomId:"",liveIngTimeKey:"",liveIngTime:"",vue:null,init:function(e,t,s){this.DEBUG=s,this.id=e.id,this.uid=e.uid,this.userName=e.userName,this.userEmail=e.userEmail,this.vue=t},getLiveInfo:function(e){var t=this,s={id:this.id,uid:this.uid};n.Z.post(i.z,s,(function(s){if(t.streamRoomId=t.id+"_"+s.info.uid,s.info.start_time){var o=new Date(s.info.start_time);t.liveIngTime=parseInt(o.getTime())}e(s)}))},accessRoom:function(){this.joinSocketRoom()},setStreamRoomId:function(e){this.streamRoomId=e},joinSocketRoom:function(){var e=this,t="no",s=sessionStorage.getItem("userJob")?sessionStorage.getItem("userJob"):"",o=sessionStorage.getItem("userPart")?sessionStorage.getItem("userPart"):"",a=sessionStorage.getItem("userPosi")?sessionStorage.getItem("userPosi"):"",c="ing",d={job:s,part:o,posi:a,parentId:this.id.toString(),name:this.userName,email:this.userEmail,uid:this.uid,status:c};n.Z.post(i.P2,d,(function(s){var o={uid:e.uid,name:e.userName,email:e.userEmail,roomId:e.streamRoomId,accessType:t,roomHost:"no"};r.Z.init(o,e.vue,e.DEBUG)}))},updateUserStatusWithIng:function(){var e={parentId:this.id.toString(),uid:this.uid,status:"ing"};n.Z.post(i.lV,e,(function(e){}))},getStartTime:function(){var e=parseInt(this.liveIngTime),t=new Date,s=(t.getTime()-e)/1e3;return s=Math.floor(s),s<0&&(s=0),s},updateLiveTime:function(){},beforeUnload:function(){r.Z.close("user"),this.updateUserStatusWithIng()},liveTimeRemove:function(){},setTimeVal:function(e){if(e=parseInt(e),isNaN(e))return"00:00:00";if(e<0)return"00:00:00";var t=e%60;t=Math.floor(t);var s,o=e/60;o=Math.floor(o),s=o>=60?o%60:o,s=Math.floor(s);var n,i=o/60;i=Math.floor(i);var r="";return n=i>=24?i%24:i,n=Math.floor(n),r+this.zf(n)+":"+this.zf(s)+":"+this.zf(t)},zf:function(e){return e=parseInt(e),e<10?"0"+e:e},doEndMeetingActive:function(e){r.Z.close("user"),localStorage.setItem(this.liveIngTimeKey,""),this.updateUserStatusWithIng(),window.opener.document.location.reload(),c()(window).off("beforeunload"),window.close()},excelDown:function(e){var t=this,s={id:e.toString()};n.Z.post(i.mg,s,(function(e){console.log(e.info),t.excelFileMake(e.info)}))},excelFileMake:function(e){var t=JSON.parse(e.problems),s="<table border='1px'>";s=s+'<tr><td colspan="2">'+e.subject+'</td></tr><tr><td colspan="2"></td></tr>';var n,i=1,r=(0,o.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(s=s+'<tr><td colspan="2">'+i+". "+a.question+"</td></tr>","mchoice"==a.prbType){var c,d=1,u=(0,o.Z)(a.items);try{for(u.s();!(c=u.n()).done;){var l=c.value;s=s+"<tr><td>"+d+"</td><td>"+l.answer+"</td></tr>",d++}}catch(b){u.e(b)}finally{u.f()}}s+='<tr><td colspan="2"></td></tr>'}}catch(b){r.e(b)}finally{r.f()}s+="</table>";var h=document.createElement("div");h.innerHTML=s,document.body.appendChild(h);var m=window.XLSX.utils.book_new(),p=window.XLSX.utils.table_to_sheet(h.getElementsByTagName("TABLE")[0]);document.body.removeChild(h);var f=e.subject+".xlsx",v=e.subject;window.XLSX.utils.book_append_sheet(m,p,v);var g=window.XLSX.write(m,{bookType:"xlsx",type:"binary"});window.saveAs(new Blob([this.s2ab(g)],{type:"application/octet-stream"}),f),this.excelDownActive=!1},s2ab:function(e){for(var t=new ArrayBuffer(e.length),s=new Uint8Array(t),o=0;o<e.length;o++)s[o]=255&e.charCodeAt(o);return t}}},21880:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v(" user ")])},n=[],i=(s(41539),s(39714),s(70359)),r=s(76065),a=s(76719),c={name:"testUserJsonRpc",data:function(){return{id:"",uid:"",hostUid:"",userName:"홍길동",userEmail:"te1st@nt.com",accessType:"yes"}},created:function(){this.id=this.$route.params.id,this.uid=this.$route.params.uid,this.hostUid=this.$route.params.hostUid,this.getMeetingInfo()},methods:{getMeetingInfo:function(){var e={id:this.id.toString(),uid:this.uid,userName:this.userName,userEmail:this.userEmail};i.Z.init(e,this,!0),r.Z.init(e,this);var t=this.id+"_"+this.hostUid;i.Z.setStreamRoomId(t),this.$eventBus.$on("rpcJsonTransfer",this.transferAction),this.$eventBus.$on("rpcTestJsonTransfer",this.testTransferAction),i.Z.joinSocketRoom()},transferAction:function(e){window.parent.postMessage(e,"https://localhost")},testTransferAction:function(e){a.Z.rpcSend(e)}},destroyed:function(){this.$eventBus.$off("rpcJsonTransfer"),this.$eventBus.$off("rpcTestJsonTransfer")}},d=c,u=s(1001),l=(0,u.Z)(d,o,n,!1,null,null,null),h=l.exports}}]);
//# sourceMappingURL=1880-legacy.216ba657.js.map