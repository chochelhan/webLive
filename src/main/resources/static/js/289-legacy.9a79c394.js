"use strict";(self["webpackChunklivego"]=self["webpackChunklivego"]||[]).push([[289],{74730:function(t,e,i){i(41539),i(39714),i(69826),i(38862),i(3699),i(1122);var o=i(89486),n=i(25494),s=i(23069),r=i(19755),a=i.n(r);e["Z"]={DEBUG:!1,id:"",uid:"",streamRoomId:"",liveIngTimeKey:"",liveIngTime:"",vue:null,chatProcess:!1,init:function(t,e,i){this.DEBUG=i,this.id=t.id,this.uid=t.uid,this.streamRoomId=this.id+"_"+this.uid,this.liveIngTimeKey=this.streamRoomId+"_liveStramHostTime",this.vue=e},getLiveInfo:function(t){var e=this,i={id:this.id};o.Z.post(n.fQ,i,(function(i){var o=new Date;i.info.start_time&&(o=new Date(i.info.start_time)),e.liveIngTime=parseInt(o.getTime()),t(i)}))},getStartTime:function(){var t=parseInt(this.liveIngTime),e=new Date,i=(e.getTime()-t)/1e3;return i=Math.floor(i),i<0&&(i=0),i},updateLiveTime:function(){},liveTimeRemove:function(){},joinSocketLiveStream:function(){var t={uid:this.uid,roomId:this.streamRoomId,roomHost:"yes"};s.Z.init(t,this.vue,this.DEBUG);var e={id:this.id.toString()};o.Z.post(n.ED,e,(function(t){}))},setTimeVal:function(t){if(t=parseInt(t),isNaN(t))return"00:00:00";if(t<0)return"00:00:00";var e=t%60;e=Math.floor(e);var i,o=t/60;o=Math.floor(o),i=o>=60?o%60:o,i=Math.floor(i);var n,s=o/60;s=Math.floor(s);var r="";return n=s>=24?s%24:s,n=Math.floor(n),r+this.zf(n)+":"+this.zf(i)+":"+this.zf(e)},zf:function(t){return t=parseInt(t),t<10?"0"+t:t},doEndMeetingActive:function(t){t?this.mobileRecodeChatAct():this.recodeChatAct(),s.Z.close("host");var e={id:this.id.toString()};o.Z.post(n.Jw,e,(function(t){}))},mobileRecodeChatAct:function(){var t=this,e=a()(".zmwebsdk-makeStyles-chatCustomize-10");if(e.html())this.mobileSaveChatAct();else{var i=a()("#menu-list-icon-more");if(i.html())a()("#menu-list-icon-more li:nth-child(2)").click(),setTimeout((function(){t.mobileSaveChatAct()}),500);else{var o=a()("#meetingSDKElement div.zmwebsdk-MuiPaper-root.zmwebsdk-makeStyles-root-58.zmwebsdk-MuiPaper-elevation1.zmwebsdk-MuiPaper-rounded > div:nth-child(5) > button");a()(o).click(),setTimeout((function(){a()("#menu-list-icon-more li:nth-child(2)").click(),setTimeout((function(){t.mobileSaveChatAct()}),500)}),500)}}},mobileSaveChatAct:function(){if(!this.chatProcess){this.chatProcess=!0;var t,e,i,o=a()(".ReactVirtualized__Grid__innerScrollContainer > li"),n=[];o.each((function(){t=a()(this).find("button:eq(0)").text(),e=a()(this).find("button:eq(1)").text(),i=a()(this).find(".zmwebsdk-MuiListItemText-root span").text(),t&&e?n.push({to:e,from:t,time:"",msg:i}):n.push({to:"",from:"",time:"",msg:i})}));var s={message:JSON.stringify(n),parentId:this.id.toString()};this.updateChat(s)}},recodeChatAct:function(){var t=a()("#wc-content #wc-footer .footer-chat-button button");if(a()("#wc-container-right")){if(a()("#wc-container-right .chat-container").html())this.saveChatAct();else if(t){t.click();var e=this;setTimeout((function(){e.saveChatAct()}),500)}}else if(t){t.click();var i=this;setTimeout((function(){i.saveChatAct()}),500)}},saveChatAct:function(){if(!this.chatProcess){this.chatProcess=!0;var t,e,i,o,n=a()("#wc-container-right .chat-container .ReactVirtualized__Grid__innerScrollContainer > div"),s=[];n.each((function(){t=a()(this).find(".chat-item__chat-info-header").find("span:eq(0)").text(),e=a()(this).find(".chat-item__chat-info-header").find("span:eq(2)").text(),i=a()(this).find(".chat-item__chat-info-header").find("span:eq(4)").text(),o=a()(this).find(".chat-message__text-content").text(),t&&e&&i?s.push({to:e,from:t,time:i,msg:o}):s.push({to:"",from:"",time:"",msg:o})}));var r={message:JSON.stringify(s),parentId:this.id.toString()};this.updateChat(r)}},updateChat:function(t){var e=this;o.Z.post(n.dl,t,(function(t){e.chatProcess=!1}))}}},30268:function(t,e,i){i.r(e),i.d(e,{default:function(){return l}});var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.meetingInfoShow?i("zoomMeetingMobileSdk",{staticClass:"zoomVideoComponent",attrs:{meetingInfo:t.meetingInfo,forceOutActive:t.forceOutActive,hostEndActive:t.hostEndActive,userInfo:t.userInfo,role:"1"},on:{zoomAction:t.zoomAction}}):t._e(),i("div",{attrs:{id:"zoom-live-mobile"}},[t.meetingInfoShow?i("hostVideoComponent",{attrs:{meetingInfo:t.meetingInfo,meetingStart:t.meetingStart},on:{outActive:t.outActive}}):t._e()],1),t.DEBUG&&t.testDebugUrl?i("iframe",{staticStyle:{display:"none"},attrs:{src:t.testDebugUrl,id:"testIframe"}}):t._e()],1)},n=[],s=(i(74916),i(15306),i(68309),i(41539),i(39714),i(16753)),r=i(3699),a=i(74730),h=i(76719),c=i(26873),m={name:"hostVideoMobile",components:{zoomMeetingMobileSdk:c.Z,hostVideoComponent:s.Z},data:function(){return{DEBUG:!1,id:"",testDebugUrl:"",forceOutActive:!1,hostEndActive:!1,userInfo:{},meetingInfo:{},meetingStart:!1,meetingInfoShow:!1}},created:function(){if(this.id=this.$route.params.id,this.$isMobile()){r.Z.setDevice(this.$isMobile());var t=r.Z.getSession();if(t&&null!==t&&void 0!==t&&t.memberInfo){if(this.id<1)return void this.doError();this.memberInfo=t.memberInfo,this.uid=this.memberInfo.uid,this.userInfo={uid:this.uid,userName:this.memberInfo.name,userEmail:this.memberInfo.email},this.streamRoomId=this.id+"_"+this.uid,this.getMeetingInfo()}else console.log("error")}else location.replace("/liveStream/hostVideoPc/"+this.id)},methods:{getMeetingInfo:function(){var t=this,e={id:this.id.toString(),uid:this.uid};a.Z.init(e,this,this.DEBUG),h.Z.init(e,this),a.Z.getLiveInfo((function(e){t.meetingInfo=e,t.meetingInfoShow=!0,t.DEBUG&&(t.testDebugUrl="http://localhost/testJsonRpc/"+t.id+"/"+t.uid)}))},zoomAction:function(t){switch(t.type){case"start":this.meetingStart=!0,this.DEBUG?this.testDebugUrl="http://localhost/testJsonRpc/"+this.id+"/"+this.uid:a.Z.joinSocketLiveStream();break}},outActive:function(){this.forceOutActive=!0}}},u=m,f=i(1001),d=(0,f.Z)(u,o,n,!1,null,null,null),l=d.exports}}]);
//# sourceMappingURL=289-legacy.9a79c394.js.map