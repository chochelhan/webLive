"use strict";(self["webpackChunklivego"]=self["webpackChunklivego"]||[]).push([[2756],{2756:function(t,s,e){e.d(s,{Z:function(){return j}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:"contents "+t.mobileClass},[e("form",{attrs:{novalidate:""},on:{submit:function(s){return s.preventDefault(),t.validate.apply(null,arguments)}}},[e("ul",{staticClass:"field-box"},[e("li",[e("div",{staticClass:"required-icon"},[t._v("문항 번호")]),e("div",{staticClass:"field-input"},[e("h3",[t._v(t._s(t.problemIndex+1)+" 번")])])]),e("li",[e("div",{staticClass:"required-icon"},[t._v("문항 유형")]),e("div",{staticClass:"field-input"},[e("v-select",{attrs:{items:t.prbTypeList,outlined:"",dense:t.dense,placeholder:"문항유형을 선택하세요","error-messages":t.prbTypeErrors},on:{input:function(s){return t.$v.prbType.$touch()},blur:function(s){return t.$v.prbType.$touch()}},model:{value:t.prbType,callback:function(s){t.prbType=s},expression:"prbType"}})],1)]),e("li",[e("div",{staticClass:"required-icon"},[t._v("문항 제목")]),e("div",{staticClass:"field-input"},[e("v-text-field",{attrs:{required:"",placeholder:"제목을 입력하세요","error-messages":t.questionErrors,outlined:"",dense:t.dense},on:{input:function(s){return t.$v.question.$touch()},blur:function(s){return t.$v.question.$touch()}},model:{value:t.question,callback:function(s){t.question=s},expression:"question"}})],1)])]),"mchoice"==t.prbType?e("ul",{staticClass:"problem-ul"},[t._m(0),e("li",{staticClass:"list-content"},[e("ul",{staticClass:"item-box"},t._l(t.items,(function(s,i){return e("li",[e("div",{staticClass:"th"},[t._v(" 답안 선택 "+t._s(i+1)+" ")]),e("div",{staticClass:"td"},[e("v-text-field",{attrs:{placeholder:"답안 선택값을 입력해주세요","error-messages":s.answerErrors,outlined:"",dense:t.dense},on:{input:function(s){return t.itemAnswerTouch(i)},blur:function(s){return t.itemAnswerTouch(i)}},model:{value:s.answer,callback:function(e){t.$set(s,"answer",e)},expression:"item.answer"}})],1),e("div",{staticClass:"control-box"},[0==i&&t.addButtonShow?e("span",{staticClass:"plus",on:{click:function(s){return t.addProblemItem()}}},[e("font-awesome-icon",{attrs:{icon:"fas fa-plus"}})],1):t._e(),i>0?e("span",{on:{click:function(s){return t.deleteProblemItem(i)}}},[e("font-awesome-icon",{attrs:{icon:"fas fa-minus"}})],1):t._e()])])})),0)])]):t._e(),t.prbType?e("ul",{staticClass:"field-box"},[e("li",[e("div",{staticClass:"required-icon"},[t._v("정답 답안")]),"subject"==t.prbType?e("div",{staticClass:"field-input"},[e("v-text-field",{attrs:{placeholder:"답안을 입력해 주세요","error-messages":t.subjectGoodErrors,dense:t.dense,outlined:""},on:{input:function(s){return t.subjectGoodTouch()},blur:function(s){return t.subjectGoodTouch()}},model:{value:t.subjectGood,callback:function(s){t.subjectGood=s},expression:"subjectGood"}})],1):e("div",{staticClass:"field-input"},[e("v-select",{attrs:{items:t.goodList,outlined:"",placeholder:"답안을 선택하세요","error-messages":t.goodErrors,dense:t.dense},on:{input:function(s){return t.goodTouch()},blur:function(s){return t.goodTouch()}},model:{value:t.good,callback:function(s){t.good=s},expression:"good"}})],1)]),e("li",[e("div",{staticClass:"required-icon"},[t._v("배점")]),e("div",{staticClass:"field-input",staticStyle:{display:"flex"}},[e("v-text-field",{attrs:{required:"",placeholder:"배점을 숫자로 입력하세요","error-messages":t.jumsuErrors,dense:t.dense,outlined:""},on:{input:function(s){return t.$v.jumsu.$touch()},blur:function(s){return t.$v.jumsu.$touch()}},model:{value:t.jumsu,callback:function(s){t.jumsu=s},expression:"jumsu"}}),e("div",{staticClass:"remain-box"},[t._v("남은배점 : "),e("strong",[t._v(t._s(t.remainJumsu))])])],1)])]):t._e(),e("p",{staticClass:"submit-button-box four-box"},[e("v-btn",{staticClass:"cancle-button",attrs:{type:"button"},on:{click:function(s){return t.problemDelete()}}},[t._v(" 취소 ")]),t.problemIndex>0?e("v-btn",{staticClass:"cancle-button",attrs:{type:"button"},on:{click:function(s){return t.goBack()}}},[t._v(" 이전문제 ")]):t._e(),t.remainJumsu>0||t.nextButton?e("v-btn",{staticClass:"submit-button",attrs:{type:"button"},on:{click:function(s){return t.addProblem()}}},[t._v(" 저장하고 다음문제 설정 ")]):t._e(),t.remainJumsu<=0?e("v-btn",{staticClass:"submit-button",attrs:{type:"submit"}},[t._v(" 출제완료 ")]):t._e()],1)])])},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",{staticClass:"list-title"},[t._v(" 답"),e("br"),t._v("안"),e("br"),t._v("선"),e("br"),t._v("택 ")])}],r=e(62032),n=(e(40561),e(41539),e(39714),e(68309),e(38862),e(28620)),u=e(40379),a=e(25494),l=e(89486),h={name:"examDirectMake",mixins:[n.oE],props:["sendParams"],validations:{prbType:{required:u.C1},question:{required:u.C1},jumsu:{required:u.C1,numeric:u.uR}},watch:{problemShow:function(t){t||this.$emit("backChange")}},data:function(){return{insertFlag:!1,mobileView:!1,mobileClass:"",prbType:"",prbTypeList:[{text:"객관식",value:"mchoice"},{text:"주관식",value:"subject"}],question:"",jumsu:"",remainJumsu:0,items:[],addButtonShow:!1,subjectGood:"",good:"",goodList:[],subjectGoodErrors:[],goodErrors:[],problemList:[],problemIndex:0,problemShow:!0,nextButton:!0,dense:!1}},created:function(){this.$isMobile()&&(this.mobileClass="mobile",this.mobileView=!0,this.dense=!0),this.setChoiceProblem()},computed:{prbTypeErrors:function(){var t=[];return this.$v.prbType.$dirty?(this.$v.prbType.required||t.push("문항유형을 선택하세요"),t):t},questionErrors:function(){var t=[];return this.$v.question.$dirty?(this.$v.question.required||t.push("문항제목을 입력하세요"),t):t},jumsuErrors:function(){var t=[];return this.$v.jumsu.$dirty?this.$v.jumsu.required?this.$v.jumsu.numeric?(this.checkRemain(),t):(t.push("배점은 숫자만 입력가능합니다"),t):(t.push("배점을 입력하세요"),t):t}},methods:{setChoiceProblem:function(){this.problemList=[],this.items=[],this.subjectGood="",this.prbType="",this.remainJumsu=this.sendParams.totalJumsu,this.question="",this.good=0;for(var t=0;t<5;t++){var s={answer:"",answerErrors:[]};this.items.push(s)}this.setGoodList()},itemAnswerTouch:function(t){this.items[t].answerErrors=[],this.items[t].answer||this.items[t].answerErrors.push(t+1+"번 답안을 입력하세요")},addProblemItem:function(){var t={answer:"",answerErrors:[]};this.items.push(t),this.setGoodList(),this.items.length>=5&&(this.addButtonShow=!1)},deleteProblemItem:function(t){this.items.splice(t,1),this.items.length<5&&(this.addButtonShow=!0),this.setGoodList()},setGoodList:function(){this.goodList=[];for(var t=1;t<=this.items.length;t++)this.goodList.push({text:t+"번",value:t})},subjectGoodTouch:function(){this.subjectGoodErrors=[],this.subjectGood||this.subjectGoodErrors.push("정답 답안을 입력해주세요")},goodTouch:function(){this.goodErrors=[],this.good||this.goodErrors.push("정답 답안을 선택해주세요")},checkRemain:function(){var t,s=this,e=0,i=0,o=(0,r.Z)(this.problemList);try{for(o.s();!(t=o.n()).done;){var n=t.value;i!=this.problemIndex&&(e+=parseInt(n.jumsu)),i++}}catch(l){o.e(l)}finally{o.f()}var u=e;if(this.jumsu){if(u=parseInt(this.sendParams.totalJumsu)-(u+parseInt(this.jumsu)),u<=0){var a=parseInt(this.sendParams.totalJumsu)-e;return setTimeout((function(){s.jumsu=a}),100),this.remainJumsu=0,void(this.nextButton=!1)}this.nextButton=!0}this.remainJumsu=u},goBack:function(){var t=this.problemList.length;t<1||this.problemIndex<1?this.problemShow=!1:(this.nextButton=!0,this.problemList.splice(this.problemIndex,1),this.problemIndex--,this.setProblem())},problemDelete:function(){this.problemList=[],this.problemIndex=0,this.remainJumsu=this.totalJumsu,this.problemShow=!1},addProblem:function(){if(this.$v.$touch(),!this.$v.$anyError){var t=!0;if("mchoice"==this.prbType){var s,e=0,i=(0,r.Z)(this.items);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.answer||(t=!1,this.itemAnswerTouch(e)),e++}}catch(l){i.e(l)}finally{i.f()}this.good||(this.goodTouch(),t=!1)}else this.subjectGood||(t=!1,this.subjectGoodTouch());if(!t)return;var n={question:this.question,items:this.items,good:this.good,prbType:this.prbType,subjectGood:this.subjectGood,jumsu:parseInt(this.jumsu)};if(this.problemIndex>=this.problemList.length?(this.problemList.push(n),this.problemIndex=this.problemList.length):(this.problemList[this.problemIndex]=n,this.problemIndex++),this.problemIndex<this.problemList.length)this.setProblem();else{this.question="",this.good=0,this.subjectGood="",this.prbType="",this.jumsu="",this.nextButton=!1,this.items=[];for(var u=0;u<5;u++){var a={answer:"",answerErrors:[]};this.items.push(a)}this.setGoodList(),this.$v.$reset()}}},setProblem:function(){var t=this.problemList[this.problemIndex];if(this.question=t.question,this.prbType=t.prbType,this.jumsu=t.jumsu.toString(),"subject"==t.prbType)this.subjectGood=t.subjectGood;else{this.items=[];var s,e=(0,r.Z)(t.items);try{for(e.s();!(s=e.n()).done;){var i=s.value;this.items.push(i)}}catch(o){e.e(o)}finally{e.f()}this.items.length<5?this.addButtonShow=!0:this.addButtonShow=!1,this.good=t.good}},validate:function(){if(this.$v.$touch(),!this.$v.$anyError){var t=!0;if("mchoice"==this.prbType){var s,e=0,i=(0,r.Z)(this.items);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.answer||(t=!1,this.itemAnswerTouch(e)),e++}}catch(n){i.e(n)}finally{i.f()}this.good||(this.goodTouch(),t=!1)}else this.subjectGood||(t=!1,this.subjectGoodTouch());if(!t)return;this.formSubmit()}},formSubmit:function(){var t=this;if(!this.insertFlag){this.insertFlag=!0;var s={question:this.question,items:this.items,good:this.good,prbType:this.prbType,subjectGood:this.subjectGood,jumsu:parseInt(this.jumsu)};this.problemIndex>=this.problemList.length?this.problemList.push(s):this.problemList[this.problemIndex]=s;var e={parentId:this.sendParams.parentId.toString(),subject:this.sendParams.name,author:this.sendParams.author,problems:JSON.stringify(this.problemList),timelimit:parseInt(this.sendParams.timelimit),totalJumsu:parseInt(this.sendParams.totalJumsu)};this.$eventBus.$emit("overlay","show"),l.Z.post(a.lk,e,(function(s){t.$eventBus.$emit("overlay","hide");var e={};if(t.insertFlag=!1,"message"==s.status)return e={message:"잘못된 접근입니다"},void t.$eventBus.$emit("modalOpen",e);"immExam"==t.sendParams.sendType?t.$emit("submitResult",s.info.id):(e={message:"정보가 저장되었습니다",doAction:function(){t.$router.push("/video/setting/dataList/all")}},t.$eventBus.$emit("modalOpen",e))}))}}}},c=h,m=e(1001),d=e(43453),p=e.n(d),b=e(63150),v=e(74161),f=e(55978),g=(0,m.Z)(c,i,o,!1,null,"e3e56b7c",null),j=g.exports;p()(g,{VBtn:b.Z,VSelect:v.Z,VTextField:f.Z})}}]);
//# sourceMappingURL=2756-legacy.754037d2.js.map