{"version":3,"file":"js/1880-legacy.216ba657.js","mappings":"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","sources":["webpack://livego/./src/common/liveStreamJsonRpcService.js","webpack://livego/./src/common/util.js","webpack://livego/./src/views/WEB/liveStream/handler/hostLiveComuHandler.js","webpack://livego/./src/views/WEB/liveStream/handler/userLiveComuHandler.js","webpack://livego/./src/views/WEB/liveStream/handler/userLiveHandler.js","webpack://livego/./src/views/WEB/liveStream/testUserJsonRpc.vue?aafb","webpack://livego/src/views/WEB/liveStream/testUserJsonRpc.vue","webpack://livego/./src/views/WEB/liveStream/testUserJsonRpc.vue?6ade","webpack://livego/./src/views/WEB/liveStream/testUserJsonRpc.vue"],"sourcesContent":["import jsonRpc from 'kurento-jsonrpc'\nimport {\n   jsonRpcUrl\n} from \"@/config/jsonRpc/jsonRpcEnv\";\n\nexport default {\n    DEBUG:false,\n    jsonRpcUrl: jsonRpcUrl,\n    connected: false,\n    jsonRpcClientWs: null,\n    sessionId: null,\n    roomId: '',\n    initMethod: '',\n    userId: null,\n    vue: null,\n    accessType:'no',\n    userName:'',\n    userEmail:'',\n    init(params, vueObj,debug) {\n        this.DEBUG = debug;\n        if (!params.uid) return;\n        if (!params.roomId) return;\n        if (this.connected) return;\n        if (params.roomHost == 'yes') {\n            this.initMethod = 'makeLiveRoom'\n        } else {\n            this.initMethod = 'joinRoom'\n            if(params.accessType)this.accessType = params.accessType;\n            if(params.name)this.userName = params.name;\n            if(params.email)this.userEmail= params.email;\n\n        }\n        this.roomId = params.roomId;\n        this.vue = vueObj;\n        this.userId = params.uid;\n\n\n        //setTimeout(()=>{\n            this.setConnect();\n        //},500)\n\n    },\n    setConnect() {\n        if(process.env.NODE_ENV =='development') {\n            return;\n        }\n\n        let protocol = 'wss';\n        if (this.DEBUG) {\n            protocol = 'ws';\n        }\n        const ws_uri = protocol+'://' + this.jsonRpcUrl + '/jsonRpc';\n        const configuration = {\n            hearbeat: 5000,\n            sendCloseMessage: false,\n            ws: {\n                uri: ws_uri,\n                useSockJS: false,\n                onconnected: () => {\n                    this.connected = true;\n                    this.socketInit();\n                },\n                ondisconnect: this.disconnectCallback(this),\n                onreconnected: this.connectReCallback(this),\n            },\n            rpc: {\n                requestTimeout: 5000,\n                sendResponse: (params) => {\n                    this.callMessage(params)\n                },\n            }\n        };\n        this.jsonRpcClientWs = new jsonRpc.clients.JsonRpcClient(configuration);\n\n    },\n\n    connectReCallback(obj) {\n        obj.connected = true;\n    },\n    disconnectCallback(obj) {\n        obj.connected = false;\n    },\n    close(type) {\n\n        let params = {};\n        params.responseMethod = \"liveClose\";\n        if(process.env.NODE_ENV =='development') {\n            params.sendMethod = \"liveClose\";\n            params.userType = type;\n            console.log(params,'-------- vue iframe send -----------------')\n            const frame = document.getElementById(\"testIframe\").contentWindow;\n            frame.postMessage(params, \"http://localhost\");\n            return;\n        }\n        if (!this.connected) return;\n        if (!this.userId) return;\n        if (!this.roomId) return;\n        params.uid = this.userId;\n        params.sessionId = this.sessionId;\n        params.userType = type;\n        params.roomId = this.roomId;\n\n        this.jsonRpcClientWs.send(\"liveClose\", params, function (error, response) {\n            if (error) {\n                console.log(error);\n            } else {\n                console.log(\"--succ--\");\n                console.log(response);\n            }\n        });\n    },\n    callMessage(params) {\n\n        switch (params.responseMethod) {\n            case 'forceHostOut':\n                this.vue.$eventBus.$emit('modalOpen', {\n                    message: '다른곳에서 강제 방송정지 시켰습니다',\n                    doAction: () => {\n                        window.close();\n                    }\n\n                });\n                break;\n            default:\n                this.vue.$eventBus.$emit('rpcJsonTransfer',params);\n                break;\n\n        }\n\n    },\n    socketInit() {\n        let params = {\n            interval: 5000,\n            operation: \"connect\",\n            uid: this.userId,\n            accessType:this.accessType,\n            roomId: this.roomId,\n            name:this.userName,\n            email:this.userEmail,\n            responseMethod:this.initMethod\n        };\n\n        this.jsonRpcClientWs.send(this.initMethod, params, (error, response) => {\n            if (error) {\n                console.log(error);\n            } else {\n                console.log(response, 'succ');\n                this.sessionId = response.sessionId;\n                switch (response.map.result) {\n                    case 'double':\n                        if (this.initMethod == 'makeLiveRoom') {\n                            this.vue.$eventBus.$emit('modalOpen', {\n                                message: '다른곳에서 이미 방송중입니다',\n                                doAction: () => {\n                                    window.close();\n                                },\n                            });\n\n                        } else {\n                            this.vue.$eventBus.$emit('modalOpen', {\n                                message: '동일 컴퓨터에서 이미 동일한 방에 접근 중입니다',\n                                doAction: () => {\n                                    window.close();\n                                }\n\n                            });\n\n                        }\n\n                        break;\n                    case 'fail':\n                        this.vue.$eventBus.$emit('modalOpen', {\n                            message: '잘못된 접근입니다',\n                            doAction: () => {\n                                window.close();\n                            }\n\n                        });\n                        break;\n                    case 'success':\n                        if (this.initMethod == 'makeLiveRoom' && response.map.waitUsers) {\n                            const sendParams = {\n                                responseMethod:'makeLiveRoomWaitUsers',\n                                waitUsers:response.map.waitUsers,\n                            }\n                            this.vue.$eventBus.$emit('rpcJsonTransfer',sendParams);\n\n                        }\n                        break;\n                }\n\n            }\n\n        });\n\n    },\n    send(params, func) {\n\n        if(process.env.NODE_ENV =='development') {\n            const frame = document.getElementById(\"testIframe\").contentWindow;\n            frame.postMessage(params, \"http://localhost\");\n            return;\n        }\n        if (!this.sessionId) return;\n        params.uid = this.userId;\n        params.sessionId = this.sessionId;\n        params.roomId = this.roomId;\n        console.log(params,'--------iframe send -----------------')\n\n        this.jsonRpcClientWs.send(params.sendMethod, params, function (error, response) {\n            if (error) {\n                console.log(error);\n            } else {\n                console.log(response);\n                func(response);\n            }\n        });\n    },\n    forceHostOut() {\n        if(process.env.NODE_ENV =='development') {\n            const frame = document.getElementById(\"testIframe\").contentWindow;\n            frame.postMessage(params, \"http://localhost\");\n            return;\n        }\n        if (!this.sessionId) return;\n        let params = {\n            uid: this.userId,\n            roomId:this.roomId,\n            sessionId: this.sessionId,\n            responseMethod: 'forceHostOut'\n        };\n        this.jsonRpcClientWs.send(\"forceHostOut\", params, function (error, response) {\n            if (error) {\n                console.log(error);\n            } else {\n                console.log(response);\n            }\n        });\n    },\n    post(frm, afterFunc) {\n\n    }\n\n\n}\n","import JQ from \"jquery\";\r\n\r\nexport default {\r\n    errorPosiFlag:false,\r\n    nl2br(text) {\r\n        return text.value.replace(/(\\n|\\r\\n)/g, '<br>');\r\n\r\n    },\r\n    nl2brContent(text) {\r\n        text = text.toString();\r\n        text = text.replace(/(\\n|\\r\\n)/g, '<br>');\r\n        return text.replace(/(<br><br>)/g, '<br>');\r\n    },\r\n    stripTags(value) {\r\n        let div = document.createElement(\"div\");\r\n        div.innerHTML = value;\r\n        let text = div.textContent || div.innerText || \"\";\r\n\r\n        return text;\r\n\r\n    },\r\n    stripTagsNotEm(value) {\r\n        let div = document.createElement(\"div\");\r\n        div.innerHTML = value.replace(/<em>/ig,'{em}').replace(/<\\/em>/ig,'{/em}')\r\n        let text = div.textContent || div.innerText || \"\";\r\n        let result = text.replace(/{em}/ig,'<em>').replace(/{\\/em}/ig,'</em>')\r\n        return result;\r\n\r\n    },\r\n    email(value) {\r\n        const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n        return pattern.test(value)\r\n    },\r\n    numericByPrice(value) {\r\n        if(value==0)return false;\r\n        if(value) {\r\n\r\n            value = value.toString()\r\n            let targetPrice = value.replace(/,/gi, '');\r\n            targetPrice = targetPrice.toString().replace(/-/gi, '');\r\n\r\n            return isNaN(targetPrice);\r\n        } else return true;\r\n    },\r\n    numeric(value) {\r\n        return isNaN(value);\r\n    },\r\n    parseNumber(value) {\r\n        if(value) {\r\n            value = value.toString()\r\n            let number = value.replace(/,/gi, '');\r\n            number = number.toString().replace(/-/gi, '');\r\n            return parseInt(number);\r\n\r\n        } else return 0;\r\n    },\r\n    price(value) {\r\n        if(value) {\r\n            value = value.toString()\r\n            let targetPrice = value.replace(/,/gi, '');\r\n            targetPrice = targetPrice.toString().replace(/-/gi, '');\r\n\r\n            if (!this.numeric(targetPrice)) {\r\n                return this.numberFormat(targetPrice);\r\n\r\n            } else return false;\r\n        } else return false;\r\n    },\r\n    br2nl(text) {\r\n        return text.replace(/(<br>|<br\\/>|<br \\/>)/g, '\\r');\r\n    },\r\n    numberFormat(number) {\r\n        if(!number)return 0;\r\n        if(isNaN(number)) {\r\n            number = number.toString().replace(/-/gi, '');\r\n        }\r\n        let nf = new Intl.NumberFormat([\"en-US\"], {});\r\n        return nf.format(number);\r\n    },\r\n    fNumberFormat(number) {\r\n        number = number.toString().replace(/-/gi, '');\r\n        number = number.toString().replace(/,/gi, '');\r\n        let nf = new Intl.NumberFormat([\"en-US\"], {});\r\n        return nf.format(number);\r\n    },\r\n    getStrCut(string,length) {\r\n        if(string.length >= length){\r\n            return string.substr(0,length)+\"..\";\r\n        } else return string;\r\n    },\r\n    errorPosition(baseEle,targetEle,func) {\r\n        const baseElement = (baseEle=='base')?JQ('body'):JQ(baseEle);\r\n        const height = JQ(baseElement).height();\r\n\r\n        const top = JQ(targetEle).offset().top;\r\n\r\n        const stTop = (top>0)?height - top + 200:height + top - 200;\r\n        if(baseEle=='base') {\r\n\r\n            JQ('html,body').animate({\r\n                scrollTop: (top - 50)\r\n            }, 100, () => {\r\n                if(this.errorPosiFlag) {\r\n                    this.errorPosiFlag = false;\r\n                    return\r\n                }\r\n                func();\r\n                this.errorPosiFlag = true;\r\n            })\r\n        } else {\r\n            JQ(baseElement).animate({\r\n                scrollTop:stTop\r\n\r\n            }, 100, () => {\r\n                func();\r\n            })\r\n        }\r\n    },\r\n\r\n}\r\n","import AUTH from '@/config/web/auth'\r\nimport UTIL from '@/common/util'\r\n\r\nimport jsonRpcService from \"@/common/liveStreamJsonRpcService\";\r\n\r\nimport JQ from \"jquery\";\r\n\r\n\r\nexport default {\r\n    id: '',\r\n    uid: '',\r\n    vue: null,\r\n    streamRoomId: '',\r\n    init(params, vue) {\r\n        this.id = params.id;\r\n        this.uid = params.uid;\r\n        this.streamRoomId = this.id + '_' + this.uid;\r\n        this.vue = vue;\r\n    },\r\n    sendToUser(event, func) {\r\n        let sendParams = {};\r\n        switch (event.page) {\r\n            case 'exam':\r\n                if (event.action == 'sendProblem') {\r\n                    this.sendRpcData(event.no, 'insertProblem', func);\r\n                    sendParams.userReponseParams = {\r\n                        parentId: this.id,\r\n                        no: event.no,\r\n                        type: 'insertProblem'\r\n                    };\r\n                    sendParams.userReponseShow = true;\r\n                }\r\n                sendParams.screenShow = 'close';\r\n                sendParams.close = 'loadExamShow';\r\n                break;\r\n            case 'immExam':\r\n                if (event.action == 'sendProblem') {\r\n                    this.sendRpcData(event.no, 'insertProblem', func);\r\n                    sendParams.userReponseParams = {\r\n                        parentId: this.id,\r\n                        no: event.no,\r\n                        type: 'insertProblem'\r\n                    };\r\n                    sendParams.userReponseShow = true;\r\n                }\r\n                sendParams.screenShow = 'close';\r\n                sendParams.close = 'loadImmExamShow';\r\n\r\n                break;\r\n            case 'quiz':\r\n                if (event.action == 'sendQuiz') {\r\n                    this.sendRpcData(event.no, 'insertQuiz', func);\r\n                    sendParams.userReponseParams = {\r\n                        parentId: this.id,\r\n                        no: event.no,\r\n                        type: 'insertQuiz'\r\n                    };\r\n                    sendParams.userReponseShow = true;\r\n                }\r\n                sendParams.screenShow = 'close';\r\n                sendParams.close = 'loadQuizShow';\r\n\r\n                break;\r\n            case 'poll':\r\n                if (event.action == 'sendPoll') {\r\n                    this.sendRpcData(event.no, 'insertPoll', func);\r\n                    sendParams.userReponseParams = {\r\n                        parentId: this.id,\r\n                        no: event.no,\r\n                        type: 'insertPoll'\r\n                    };\r\n                    sendParams.userReponseShow = true;\r\n                }\r\n                sendParams.screenShow = 'close';\r\n                sendParams.close = 'loadPollShow';\r\n                break;\r\n            case 'vote':\r\n                if (event.action == 'sendVote') {\r\n                    this.sendRpcData(event.no, 'insertVote', func);\r\n                    sendParams.userReponseParams = {\r\n                        parentId: this.id,\r\n                        no: event.no,\r\n                        type: 'insertVote'\r\n                    };\r\n                    sendParams.userReponseShow = true;\r\n                }\r\n                sendParams.screenShow = 'close';\r\n                sendParams.close = 'loadPollShow';\r\n                break;\r\n            case 'userResponse':\r\n                if (event.action == 'forceEnd') {\r\n                    let msg = '';\r\n                    switch (event.gtype) {\r\n                        case 'insertProblem':\r\n                            msg = '시험을';\r\n                            break;\r\n                        case 'insertPoll':\r\n                            msg = '설문조사를';\r\n                            break;\r\n                        case 'insertVote':\r\n                            msg = '투표를';\r\n                            break;\r\n                        case 'insertQuiz':\r\n                            msg = '간단퀴즈를';\r\n                            break;\r\n                    }\r\n                    let message = {\r\n                        type: 'confirm',\r\n                        message: msg + ' 강제 종료하시겠습니까?',\r\n                        doAction: () => {\r\n                            this.modalResponse('forceResponseEnd');\r\n                            JQ('#app-response').hide();\r\n                            func({cmd: 'responseClose'})\r\n\r\n                        }\r\n                    };\r\n                    this.vue.$eventBus.$emit('modalOpen', message);\r\n\r\n                } else if (event.action == 'barHide') {\r\n                    switch (event.gtype) {\r\n                        case 'insertProblem':\r\n                            sendParams.responseTitle = '시험 진행중';\r\n\r\n                            break;\r\n                        case 'insertPoll':\r\n                            sendParams.responseTitle = '설문 진행중';\r\n                            break;\r\n                        case 'insertVote':\r\n                            sendParams.responseTitle = '투표 진행중';\r\n                            break;\r\n                        case 'insertQuiz':\r\n                            sendParams.responseTitle = '간단퀴즈 진행중';\r\n                            break;\r\n                    }\r\n                    JQ('#app-response').hide();\r\n                    /*\r\n\r\n                    if (this.timeResponseInterval) {\r\n                        this.responseTimeInfo = '00:00:00'\r\n                        clearInterval(this.timeResponseInterval);\r\n                    }\r\n                    let rtimeCnt = 0;\r\n\r\n                    this.timeResponseInterval = setInterval(() => {\r\n                        this.responseTimeInfo = this.setTimeVal(rtimeCnt);\r\n                        rtimeCnt++;\r\n\r\n                    }, 1000);\r\n                    */\r\n                    JQ('#menu-response-box').show();\r\n                } else {\r\n                    JQ('#app-response').hide();\r\n                    sendParams.userReponseShow = 'close';\r\n                }\r\n                break;\r\n            case 'fileView':\r\n                sendParams.close = 'loadFileShow';\r\n                sendParams.fileNo = 'empty';\r\n                sendParams.screenShow = 'close';\r\n                break;\r\n            case 'data':\r\n                if (event.action == 'share') {\r\n                    sendParams.fileNo = event.fdata.id;\r\n                    sendParams.open = 'loadFileShow';\r\n                    let rpcParams = {\r\n                        sendMethod: 'insertFdata',\r\n                        data: event.fdata.id,\r\n                        responseMethod: 'insertFdata',\r\n                    }\r\n                    jsonRpcService.send(rpcParams, (res) => {\r\n                       // func({cmd: 'responseOpen', data: res});\r\n                    });\r\n                } else {\r\n                    sendParams.screenShow = 'close';\r\n                }\r\n                sendParams.close = 'loadDataShow';\r\n\r\n        }\r\n        return sendParams;\r\n    },\r\n    sendRpcData(no, type, func) {\r\n        let rpcParams = {\r\n            sendMethod: type,\r\n            data: no,\r\n            responseMethod: type,\r\n        }\r\n        jsonRpcService.send(rpcParams, (res) => {\r\n            func({cmd: 'responseOpen', data: res});\r\n        });\r\n        let msg;\r\n        switch (type) {\r\n            case 'insertProblem':\r\n                msg = '시험을 출제하였습니다';\r\n                break;\r\n            case 'insertPoll':\r\n                msg = '설문조사를 시작하였습니다';\r\n                break;\r\n            case 'insertVote':\r\n                msg = '투료를 시작하였습니다';\r\n                break;\r\n            case 'insertQuiz':\r\n                msg = '간단퀴즈를 출제하였습니다';\r\n                break;\r\n        }\r\n        JQ('#app-response').show();\r\n        let message = {\r\n            type: 'timeout',\r\n            message: msg,\r\n        };\r\n        this.vue.$eventBus.$emit('modalOpen', message);\r\n\r\n    },\r\n    rpcSend(params) {\r\n        jsonRpcService.send(params, (res) => {\r\n\r\n        });\r\n    },\r\n    modalResponse(type) {\r\n        switch (type) {\r\n            case 'forceResponseEnd':\r\n                let rpcParams = {\r\n                    sendMethod: 'forceResponseEnd',\r\n                    data: 'none',\r\n                    responseMethod: 'forceResponseEnd',\r\n                }\r\n                jsonRpcService.send(rpcParams, () => {\r\n                });\r\n\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n}\r\n","import AUTH from '@/config/web/auth'\r\nimport UTIL from '@/common/util'\r\nimport apiService from \"@/config/web/apiService\";\r\nimport {\r\n    API_URL_BROADCAST_LIVE_BAD_REPORT_INSERT\r\n} from \"@/config/web/urls\";\r\nimport jsonRpcService from \"@/common/liveStreamJsonRpcService\";\r\nimport JQ from \"jquery\";\r\n\r\nexport default {\r\n    id:'',\r\n    uid:'',\r\n    userName:'',\r\n    userEmail:'',\r\n    vue:null,\r\n    init(params,vue) {\r\n        this.id = params.id;\r\n        this.uid = params.uid;\r\n        this.userName = params.userName;\r\n        this.userEmail = params.userEmail;\r\n        this.vue = vue;\r\n    },\r\n    loadComponent(cmd) {\r\n        let sendParams = {};\r\n        switch(cmd) {\r\n            case 'poll':\r\n            case 'vote':\r\n                sendParams.sendData = {\r\n                    no: this.id,\r\n                    uid: this.uid,\r\n                    name: this.userName,\r\n                    email: this.userEmail\r\n                };\r\n                JQ('#app-response').show();\r\n                if(cmd=='poll') {\r\n                    sendParams.load = 'loadPollShow';\r\n                    sendParams.sendParamsId = 'sendPollData'\r\n                } else {\r\n                    sendParams.load = 'loadVoteShow';\r\n                    sendParams.sendParamsId = 'sendVoteData'\r\n                }\r\n\r\n                break;\r\n            case 'data':\r\n                sendParams.screenShow = true;\r\n                sendParams.load = 'loadDataShow';\r\n                break;\r\n            case 'boardWrite':\r\n                sendParams.screenShow = true;\r\n                sendParams.updArticleNo = 'new';\r\n                sendParams.load = 'zoomBoardUpdateShow';\r\n                break;\r\n            case 'board':\r\n                sendParams.screenShow = true;\r\n                sendParams.load = 'zoomBoardListShow';\r\n                break;\r\n        }\r\n        return sendParams;\r\n    },\r\n    jsonRpcResponse(params) {\r\n\r\n        let sendParams = {};\r\n\r\n        switch (params.responseMethod) {\r\n            case 'insertPoll':\r\n            case 'insertProblem':\r\n            case 'insertVote':\r\n            case 'insertQuiz':\r\n                if(params.responseMethod == 'insertProblem') {\r\n                    sendParams.sendParamsId = 'sendExamData';\r\n                    sendParams.load = 'loadExamShow';\r\n                    sendParams.examNo = params.data;\r\n                } else if(params.responseMethod == 'insertPoll') {\r\n                    sendParams.sendParamsId = 'sendPollData';\r\n                    sendParams.load = 'loadPollShow';\r\n\r\n                } else if(params.responseMethod == 'insertVote') {\r\n                    sendParams.sendParamsId = 'sendVoteData';\r\n                    sendParams.load = 'loadVoteShow';\r\n                } else if(params.responseMethod == 'insertQuiz') {\r\n                    sendParams.sendParamsId = 'sendQuizData';\r\n                    sendParams.load = 'loadQuizShow';\r\n                }\r\n\r\n                JQ('#app-response').show();\r\n                sendParams.sendData = {\r\n                    no: parseInt(params.data),\r\n                    uid: this.uid,\r\n                    name: this.userName\r\n                }\r\n                break;\r\n        }\r\n        return sendParams;\r\n    },\r\n    sendReply(type) {\r\n        const rpcParams = {\r\n            sendMethod: type,\r\n            uid: this.uid,\r\n            data: this.uid,\r\n            responseMethod: type,\r\n        };\r\n        jsonRpcService.send(rpcParams, () => {\r\n\r\n        });\r\n\r\n    },\r\n    badSubmit(content) {\r\n        const frm = {\r\n            parentId:this.id.toString(),\r\n            uid:this.uid,\r\n            name:this.userName,\r\n            content:content\r\n        }\r\n        apiService.post(API_URL_BROADCAST_LIVE_BAD_REPORT_INSERT, frm, (ret) => {\r\n            let message = {\r\n                type: 'timeout',\r\n                message: '신고가 접수되었습니다',\r\n            };\r\n            this.vue.$eventBus.$emit('modalOpen', message);\r\n        });\r\n    }\r\n\r\n}\r\n","import AUTH from '@/config/web/auth'\r\nimport UTIL from '@/common/util'\r\nimport apiService from \"@/config/web/apiService\";\r\nimport {\r\n    API_URL_BROADCAST_USER_LIVE_WITH_STATUS_ING,\r\n    API_URL_BROADCAST_LIVE_USER_JOIN,\r\n    API_URL_BROADCAST_LIVE_USER_OUT,\r\n    API_URL_BROADCAST_UPDATE_USER_STATUS,\r\n    API_URL_BROADCAST_LIVE_GET_EXAM\r\n} from \"@/config/web/urls\";\r\nimport jsonRpcService from \"@/common/liveStreamJsonRpcService\";\r\nimport JQ from \"jquery\";\r\n\r\n\r\nexport default {\r\n    DEBUG: false,\r\n    id: '',\r\n    uid: '',\r\n    userName: '',\r\n    userEmail: '',\r\n    streamRoomId: '',\r\n    liveIngTimeKey: '',\r\n    liveIngTime: '',\r\n    vue: null,\r\n    init(params, vueObj, debug) {\r\n        this.DEBUG = debug;\r\n        this.id = params.id;\r\n        this.uid = params.uid;\r\n        this.userName = params.userName;\r\n        this.userEmail = params.userEmail;\r\n        this.vue = vueObj;\r\n\r\n    },\r\n    getLiveInfo(func) {\r\n        const frm = {id: this.id, uid: this.uid}\r\n        apiService.post(API_URL_BROADCAST_USER_LIVE_WITH_STATUS_ING, frm, (ret) => {\r\n            this.streamRoomId = this.id + '_' + ret.info.uid;\r\n            if (ret.info.start_time) {\r\n                const nowDate = new Date(ret.info.start_time);\r\n                this.liveIngTime = parseInt(nowDate.getTime());\r\n\r\n            }\r\n\r\n            func(ret);\r\n\r\n        })\r\n\r\n\r\n    },\r\n    accessRoom() {\r\n        this.joinSocketRoom();\r\n    },\r\n    setStreamRoomId(streamRoomId) {\r\n        this.streamRoomId = streamRoomId;\r\n    },\r\n    joinSocketRoom() {\r\n        const accessType = 'no';\r\n        let job = (sessionStorage.getItem('userJob')) ? sessionStorage.getItem('userJob') : '';\r\n        let part = (sessionStorage.getItem('userPart')) ? sessionStorage.getItem('userPart') : '';\r\n        let posi = (sessionStorage.getItem('userPosi')) ? sessionStorage.getItem('userPosi') : '';\r\n        let status = 'ing';\r\n        const frm = {\r\n            job: job,\r\n            part: part,\r\n            posi: posi,\r\n            parentId: this.id.toString(),\r\n            name: this.userName,\r\n            email: this.userEmail,\r\n            uid: this.uid,\r\n            status: status,\r\n        }\r\n\r\n        apiService.post(API_URL_BROADCAST_LIVE_USER_JOIN, frm, (ret) => {\r\n            let params = {\r\n                uid: this.uid,\r\n                name: this.userName,\r\n                email: this.userEmail,\r\n                roomId: this.streamRoomId,\r\n                accessType: accessType,\r\n                roomHost: 'no',\r\n            }\r\n            jsonRpcService.init(params, this.vue, this.DEBUG);\r\n        });\r\n\r\n    },\r\n    updateUserStatusWithIng() {\r\n        const frm = {\r\n            parentId: this.id.toString(),\r\n            uid: this.uid,\r\n            status: 'ing',\r\n        }\r\n\r\n        apiService.post(API_URL_BROADCAST_UPDATE_USER_STATUS, frm, (ret) => {\r\n\r\n        });\r\n    },\r\n    getStartTime() {\r\n        let ingTime = parseInt(this.liveIngTime);\r\n        let nowDate = new Date();\r\n        let timeCnt = (nowDate.getTime() - ingTime) / 1000;\r\n        timeCnt = Math.floor(timeCnt);\r\n        if (timeCnt < 0) timeCnt = 0;\r\n        return timeCnt;\r\n    },\r\n    updateLiveTime() {\r\n\r\n    },\r\n    beforeUnload() {\r\n        jsonRpcService.close(\"user\");\r\n        this.updateUserStatusWithIng();\r\n    },\r\n    liveTimeRemove() {\r\n\r\n    },\r\n    setTimeVal(sec) {\r\n        sec = parseInt(sec);\r\n        if (isNaN(sec)) return '00:00:00';\r\n        if (sec < 0) return '00:00:00';\r\n        let resultSec = sec % 60;\r\n        resultSec = Math.floor(resultSec)\r\n        let min = sec / 60;\r\n        min = Math.floor(min);\r\n        let resultMin;\r\n        if (min >= 60) {\r\n            resultMin = min % 60;\r\n        } else {\r\n            resultMin = min;\r\n        }\r\n        resultMin = Math.floor(resultMin);\r\n        let hour = min / 60;\r\n        hour = Math.floor(hour);\r\n        let resultHour;\r\n        let day = '';\r\n        if (hour >= 24) {\r\n            resultHour = hour % 24;\r\n        } else {\r\n            resultHour = hour;\r\n        }\r\n        resultHour = Math.floor(resultHour);\r\n        return day + this.zf(resultHour) + ':' + this.zf(resultMin) + ':' + this.zf(resultSec);\r\n    },\r\n    zf(date) {\r\n        date = parseInt(date);\r\n        if (date < 10) {\r\n            return \"0\" + date;\r\n        } else return date;\r\n    },\r\n    doEndMeetingActive(cmd) {\r\n        jsonRpcService.close(\"user\");\r\n        localStorage.setItem(this.liveIngTimeKey, '');\r\n        this.updateUserStatusWithIng();\r\n\r\n        window.opener.document.location.reload();\r\n        JQ(window).off(\"beforeunload\");\r\n        window.close();\r\n\r\n\r\n    },\r\n    excelDown(examResultNo) {\r\n        const frm = {id: examResultNo.toString()}\r\n        apiService.post(API_URL_BROADCAST_LIVE_GET_EXAM, frm, (ret) => {\r\n            console.log(ret.info)\r\n            this.excelFileMake(ret.info);\r\n\r\n        })\r\n\r\n    },\r\n    excelFileMake(info) {\r\n        let datas = JSON.parse(info.problems);\r\n\r\n        let tab_text = \"<table border='1px'>\";\r\n        tab_text = tab_text + '<tr><td colspan=\"2\">' + info.subject + '</td></tr><tr><td colspan=\"2\"></td></tr>';\r\n        let pIdx = 1;\r\n        for (let data of datas) {\r\n            tab_text = tab_text + '<tr><td colspan=\"2\">' + pIdx + '. ' + data.question + '</td></tr>'\r\n            if (data.prbType == 'mchoice') {\r\n                let idx = 1;\r\n                for (let item of data.items) {\r\n                    tab_text = tab_text + '<tr><td>' + idx + '</td><td>' + item.answer + '</td></tr>';\r\n                    idx++;\r\n                }\r\n            }\r\n            tab_text = tab_text + '<tr><td colspan=\"2\"></td></tr>'\r\n        }\r\n        tab_text = tab_text + '</table>';\r\n        let elt = document.createElement(\"div\");\r\n        elt.innerHTML = tab_text;\r\n        document.body.appendChild(elt);\r\n\r\n        const wb = window.XLSX.utils.book_new();\r\n        const workSheet = window.XLSX.utils.table_to_sheet(elt.getElementsByTagName(\"TABLE\")[0]);\r\n        document.body.removeChild(elt);\r\n\r\n        const fileName = info.subject + '.xlsx';\r\n        const sheetName = info.subject;\r\n        // step 3. workbook에 새로만든 워크시트에 이름을 주고 붙인다.\r\n        window.XLSX.utils.book_append_sheet(wb, workSheet, sheetName);\r\n        // step 4. 엑셀 파일 만들기\r\n        const wbout = window.XLSX.write(wb, {bookType: 'xlsx', type: 'binary'});\r\n        // step 5. 엑셀 파일 내보내기\r\n        window.saveAs(new Blob([this.s2ab(wbout)], {type: \"application/octet-stream\"}), fileName);\r\n        this.excelDownActive = false;\r\n\r\n    },\r\n    s2ab(s) {\r\n        const buf = new ArrayBuffer(s.length); //convert s to arrayBuffer\r\n        const view = new Uint8Array(buf);  //create uint8array as viewer\r\n        for (var i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xFF; //convert to octet\r\n        return buf;\r\n    },\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" user \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        user\r\n    </div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n\r\n    import userLiveHandler from './handler/userLiveHandler';\r\n    import userLiveComuHandler from './handler/userLiveComuHandler';\r\n    import hostLiveComuHandler from \"@/views/WEB/liveStream/handler/hostLiveComuHandler\";\r\n\r\n    export default {\r\n        name: 'testUserJsonRpc',\r\n        data() {\r\n            return {\r\n                id: '',\r\n                uid: '',\r\n                hostUid:'',\r\n                userName:'홍길동',\r\n                userEmail:'te1st@nt.com',\r\n                accessType:'yes',\r\n\r\n            }\r\n        },\r\n        created() {\r\n            this.id = this.$route.params.id;\r\n            this.uid = this.$route.params.uid;\r\n            this.hostUid = this.$route.params.hostUid;\r\n\r\n            this.getMeetingInfo();\r\n        },\r\n        methods: {\r\n            getMeetingInfo() {\r\n                const params = {\r\n                    id: this.id.toString(),\r\n                    uid: this.uid,\r\n                    userName: this.userName,\r\n                    userEmail: this.userEmail\r\n                }\r\n                userLiveHandler.init(params, this,true);\r\n                userLiveComuHandler.init(params, this);\r\n                const streamRoomId = this.id + '_'+this.hostUid;\r\n\r\n                userLiveHandler.setStreamRoomId(streamRoomId);\r\n                this.$eventBus.$on('rpcJsonTransfer',this.transferAction);\r\n                this.$eventBus.$on('rpcTestJsonTransfer',this.testTransferAction);\r\n                userLiveHandler.joinSocketRoom();\r\n            },\r\n            transferAction(params) {\r\n                window.parent.postMessage(params,'https://localhost');\r\n            },\r\n            testTransferAction(params) {\r\n                hostLiveComuHandler.rpcSend(params);\r\n\r\n            }\r\n        },\r\n        destroyed() {\r\n            this.$eventBus.$off('rpcJsonTransfer');\r\n            this.$eventBus.$off('rpcTestJsonTransfer');\r\n\r\n        }\r\n\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./testUserJsonRpc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./testUserJsonRpc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./testUserJsonRpc.vue?vue&type=template&id=d191758c&\"\nimport script from \"./testUserJsonRpc.vue?vue&type=script&lang=js&\"\nexport * from \"./testUserJsonRpc.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["DEBUG","jsonRpcUrl","connected","jsonRpcClientWs","sessionId","roomId","initMethod","userId","vue","accessType","userName","userEmail","init","params","vueObj","debug","this","uid","roomHost","name","email","setConnect","protocol","ws_uri","configuration","hearbeat","sendCloseMessage","ws","uri","useSockJS","onconnected","socketInit","ondisconnect","disconnectCallback","onreconnected","connectReCallback","rpc","requestTimeout","sendResponse","callMessage","jsonRpc","obj","close","type","responseMethod","userType","send","error","response","console","log","$eventBus","$emit","message","doAction","window","interval","operation","map","result","waitUsers","sendParams","func","sendMethod","forceHostOut","post","frm","afterFunc","errorPosiFlag","nl2br","text","value","replace","nl2brContent","toString","stripTags","div","document","createElement","innerHTML","textContent","innerText","stripTagsNotEm","pattern","test","numericByPrice","targetPrice","isNaN","numeric","parseNumber","number","parseInt","price","numberFormat","br2nl","nf","Intl","NumberFormat","format","fNumberFormat","getStrCut","string","length","substr","errorPosition","baseEle","targetEle","baseElement","JQ","height","top","offset","stTop","animate","scrollTop","id","streamRoomId","sendToUser","event","page","action","sendRpcData","no","userReponseParams","parentId","userReponseShow","screenShow","msg","gtype","modalResponse","hide","cmd","responseTitle","show","fileNo","fdata","open","rpcParams","data","jsonRpcService","res","rpcSend","loadComponent","sendData","load","sendParamsId","updArticleNo","jsonRpcResponse","examNo","sendReply","badSubmit","content","apiService","API_URL_BROADCAST_LIVE_BAD_REPORT_INSERT","ret","liveIngTimeKey","liveIngTime","getLiveInfo","API_URL_BROADCAST_USER_LIVE_WITH_STATUS_ING","info","start_time","nowDate","Date","getTime","accessRoom","joinSocketRoom","setStreamRoomId","job","sessionStorage","getItem","part","posi","status","API_URL_BROADCAST_LIVE_USER_JOIN","updateUserStatusWithIng","API_URL_BROADCAST_UPDATE_USER_STATUS","getStartTime","ingTime","timeCnt","Math","floor","updateLiveTime","beforeUnload","liveTimeRemove","setTimeVal","sec","resultSec","resultMin","min","resultHour","hour","day","zf","date","doEndMeetingActive","localStorage","setItem","opener","location","reload","off","excelDown","examResultNo","API_URL_BROADCAST_LIVE_GET_EXAM","excelFileMake","datas","JSON","parse","problems","tab_text","subject","pIdx","question","prbType","idx","items","item","answer","elt","body","appendChild","wb","XLSX","utils","book_new","workSheet","table_to_sheet","getElementsByTagName","removeChild","fileName","sheetName","book_append_sheet","wbout","write","bookType","saveAs","Blob","s2ab","excelDownActive","s","buf","ArrayBuffer","view","Uint8Array","i","charCodeAt","render","_vm","_h","$createElement","_c","_self","_v","staticRenderFns","hostUid","methods","userLiveHandler","userLiveComuHandler","hostLiveComuHandler","component"],"sourceRoot":""}